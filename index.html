<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ­¡è¿é é¢èˆ‡å¤©æ°£ç¤ºç¯„</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      text-align: center;
      background-color: #f0f4f8;
    }
    #welcome {
      font-size: 24px;
      color: #333;
      margin-bottom: 5px;
    }
    #goodWords {
      font-size: 18px;
      color: #555;
      margin-bottom: 20px;
      font-style: italic;
    }
    #weather {
      font-size: 20px;
      color: #444;
      margin-bottom: 40px;
    }
    p#message {
      font-size: 18px;
      color: #222;
      margin-top: 20px;
      min-height: 24px;
    }
    button.btn {
      border: none;
      padding: 12px 28px;
      margin: 10px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 7px rgba(0,0,0,0.15);
      min-width: 160px;
      white-space: nowrap;
      color: white;
    }
    .btn-gradient {
      background: linear-gradient(45deg, #6a11cb, #2575fc);
    }
    .btn-gradient:hover {
      background: linear-gradient(45deg, #2575fc, #6a11cb);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.25);
    }
    .btn-red {
      background-color: #e74c3c;
    }
    .btn-red:hover {
      background-color: #c0392b;
      transform: translateY(-3px);
    }
    .btn-green {
      background-color: #27ae60;
    }
    .btn-green:hover {
      background-color: #1e8449;
      transform: translateY(-3px);
    }
  </style>
</head>
<body>

  <div id="welcome">æ­¡è¿ä¾†åˆ°æˆ‘çš„ç¶²ç«™ï¼</div>
  <div id="goodWords">ä»Šå¤©æ˜¯ç¾å¥½çš„ä¸€å¤©ï¼Œé¡˜ä½ å¿ƒæƒ…æ„‰å¿«ï¼ğŸŒ</div>
  <div id="weather">æ­£åœ¨è¼‰å…¥å¤©æ°£è³‡è¨Š...</div>

  <p id="message"></p>

  <button class="btn btn-gradient" onclick="open104Home()">å‰å¾€ 104</button>
  <button class="btn btn-red" onclick="openPingHsu104()">å‰å¾€ PingHsu's 104</button>
  <button class="btn btn-green" onclick="openuLinkedIn()">å‰å¾€ LinkedIn</button>
  <button class="btn btn-green" onclick="openuLinkedInPingHsu()">å‰å¾€ PingHsu's LinkedIn</button>

<script>
  function showMessage(text) {
    document.getElementById('message').textContent = text;
  }

  function open104Home() {
    showMessage('Button clicked: å‰å¾€ 104');
    window.open('https://www.104.com.tw', '_blank', 'noopener,noreferrer');
  }

  function openPingHsu104() {
    showMessage('Button clicked: å‰å¾€ PingHsu\'s 104');
    window.open('https://www.104.com.tw/jobbank/custview/index.php?r=cust&j=4a4b432f3e5c3f284e323c1d1d1d1d5f2443a363189j99', '_blank', 'noopener,noreferrer');
  }

  function openuLinkedIn() {
    showMessage('Button clicked: å‰å¾€ LinkedIn');
    window.open('https://www.linkedin.com/', '_blank', 'noopener,noreferrer');
  }

  function openuLinkedInPingHsu() {
    showMessage('Button clicked: å‰å¾€ PingHsu\'s LinkedIn');
    window.open('https://www.linkedin.com/in/ping-h-32b485104/', '_blank', 'noopener,noreferrer');
  }

  // ä½¿ç”¨ freegeoip.app ç²å–ç”¨æˆ¶åœ°ç†ä½ç½®ï¼Œå†ç”¨ open-meteo.com æŸ¥å¤©æ°£ï¼ˆå…è²»ç„¡éœ€ API keyï¼‰
  async function loadWeather() {
    try {
      // å–å¾—ç”¨æˆ¶ IP å®šä½è³‡è¨Š
      let resGeo = await fetch('https://freegeoip.app/json/');
      let geoData = await resGeo.json();
      const lat = geoData.latitude;
      const lon = geoData.longitude;
      const city = geoData.city || geoData.region_name || geoData.country_name;

      // ç”¨ open-meteo API æŸ¥è©¢æ°£æº«å’Œå¤©æ°£ä»£ç¢¼
      // open-meteo æ°£è±¡ç¢¼èªªæ˜ https://open-meteo.com/en/docs#weathercode
      let resWeather = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
      let weatherData = await resWeather.json();

      if(weatherData && weatherData.current_weather) {
        const temp = weatherData.current_weather.temperature;
        const weatherCode = weatherData.current_weather.weathercode;

        const weatherText = weatherCodeToText(weatherCode);

        document.getElementById('weather').textContent = `ç›®å‰ä½ç½®ï¼š${city}ï¼Œæº«åº¦ç´„ ${temp}Â°Cï¼Œå¤©æ°£ï¼š${weatherText}`;
      } else {
        document.getElementById('weather').textContent = 'å¤©æ°£è³‡è¨Šæš«æ™‚ç„¡æ³•å–å¾—ã€‚';
      }
    } catch(e) {
      console.error(e);
      document.getElementById('weather').textContent = 'è¼‰å…¥å¤©æ°£æ™‚ç™¼ç”ŸéŒ¯èª¤ã€‚';
    }
  }

  // å°‡ open-meteo çš„ weathercode è½‰æˆæ–‡å­—
  function weatherCodeToText(code) {
    const mapping = {
      0: 'æ™´æœ—',
      1: 'ä¸»è¦æ™´æœ—',
      2: 'éƒ¨åˆ†å¤šé›²',
      3: 'å¤šé›²',
      45: 'è–„éœ§',
      48: 'éœ§å‡‡',
      51: 'è¼•å¾®æ¯›æ¯›é›¨',
      53: 'ä¸­åº¦æ¯›æ¯›é›¨',
      55: 'æ¿ƒæ¯›æ¯›é›¨',
      56: 'è¼•å¾®å†°å†·æ¯›æ¯›é›¨',
      57: 'æ¿ƒå†°å†·æ¯›æ¯›é›¨',
      61: 'å°é›¨',
      63: 'ä¸­é›¨',
      65: 'å¤§é›¨',
      66: 'è¼•å¾®å†°å†·é›¨',
      67: 'æ¿ƒå†°å†·é›¨',
      71: 'å°é›ª',
      73: 'ä¸­é›ª',
      75: 'å¤§é›ª',
      77: 'é›ªç²’',
      80: 'å°é›¨é™£é›¨',
      81: 'ä¸­é›¨é™£é›¨',
      82: 'å¤§é›¨é™£é›¨',
      85: 'å°é›ªé™£é›ª',
      86: 'å¤§é›ªé™£é›ª',
      95: 'é›·é›¨',
      96: 'è¼•å¾®é›·é›¨å¸¶å†°é›¹',
      99: 'å¼·é›·é›¨å¸¶å†°é›¹'
    };
    return mapping[code] || 'æœªçŸ¥å¤©æ°£';
  }

  window.onload = loadWeather;
</script>
</body>
</html>
